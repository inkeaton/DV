<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DV2 – Section 2: Scrollytelling Demo</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet" />
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="../common/style/style.css" />
    <link rel="stylesheet" href="../common/style/scrolly.css" />

    <!-- Material Web Components Import Map -->
    <script type="importmap">
        { "imports": { "@material/web/": "https://esm.run/@material/web/" } }
    </script>

    <script type="module">
        // Material Web Components
        import '@material/web/all.js';
        import { styles } from '@material/web/typography/md-typescale-styles.js';
        document.adoptedStyleSheets.push(styles.styleSheet);
        
        // Shell components (header, drawer, footer)
        import '../common/shell.js';
        
        // Section-specific modules
        import { initScrollController } from './scroll-controller.js';
        import { initVisualization } from './visualization.js';
        
        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', async () => {
            // Initialize the D3 visualization
            const vis = await initVisualization('scrolly-vis');
            
            // Initialize scroll controller with visualization reference
            initScrollController(vis);
        });
    </script>
</head>

<body>
    <app-header></app-header>
    <app-drawer></app-drawer>

    <main>
        <!-- ================================================================
             INTRO SECTION
             ================================================================
             Full-width introduction before the scrollytelling begins
             ================================================================ -->
        <section class="scrolly-intro">
            <h1 class="md-typescale-display-small">Understanding Data Through Scrolling</h1>
            <p class="md-typescale-body-large">
                This is a demonstration of <strong>scrollytelling</strong> — a narrative technique 
                where the visualization updates as you scroll through the story.
            </p>
            <p class="md-typescale-body-large">
                We'll explore mock data about <em>global coffee consumption</em> and discover 
                patterns through interactive visualization.
            </p>
            
            <div class="scroll-indicator">
                <span class="md-typescale-label-large">Scroll to begin</span>
                <md-icon>keyboard_arrow_down</md-icon>
            </div>
        </section>

        <!-- ================================================================
             SCROLLYTELLING SECTION
             ================================================================
             Split view: sticky visualization + scrolling narrative
             ================================================================ -->
        <section class="scrolly-container">
            
            <!-- STICKY VISUALIZATION PANEL -->
            <div class="scrolly-graphic">
                <div id="scrolly-vis" class="scrolly-vis">
                    <!-- D3 visualization will be rendered here -->
                    
                    <!-- Legend (shown/hidden based on scroll state) -->
                    <div id="scrolly-legend" class="scrolly-legend">
                        <div class="scrolly-legend-item">
                            <div class="scrolly-legend-color" style="background: var(--md-sys-color-primary);"></div>
                            <span>Category A</span>
                        </div>
                        <div class="scrolly-legend-item">
                            <div class="scrolly-legend-color" style="background: var(--md-sys-color-tertiary);"></div>
                            <span>Category B</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCROLLING TEXT COLUMN -->
            <div class="scrolly-text">
                
                <!-- STEP 1: Introduction to the data -->
                <div class="scrolly-step" data-step="1">
                    <div class="scrolly-step-content">
                        <h2 class="md-typescale-headline-small">The Data</h2>
                        <p class="md-typescale-body-large">
                            Let's start with our <strong>dataset</strong>. Each circle represents 
                            a data point — in this case, coffee consumption in different countries.
                        </p>
                        <p class="md-typescale-body-medium">
                            The size of each circle corresponds to the <em>population</em> of the country.
                        </p>
                    </div>
                </div>

                <div class="scrolly-spacer"></div>

                <!-- STEP 2: Highlight a category -->
                <div class="scrolly-step" data-step="2">
                    <div class="scrolly-step-content">
                        <h2 class="md-typescale-headline-small">European Countries</h2>
                        <p class="md-typescale-body-large">
                            <strong>European countries</strong> tend to have the highest per-capita 
                            coffee consumption. Nordic countries like Finland lead the world.
                        </p>
                        <p class="md-typescale-body-medium">
                            Notice how the highlighted points cluster towards higher values.
                        </p>
                    </div>
                </div>

                <div class="scrolly-spacer"></div>

                <!-- STEP 3: Show distribution -->
                <div class="scrolly-step" data-step="3">
                    <div class="scrolly-step-content">
                        <h2 class="md-typescale-headline-small">Distribution</h2>
                        <p class="md-typescale-body-large">
                            When we look at the <strong>distribution</strong> of coffee consumption, 
                            we can see it follows a pattern.
                        </p>
                        <p class="md-typescale-body-medium">
                            The data transforms into a histogram view, showing how many countries 
                            fall into each consumption bracket.
                        </p>
                    </div>
                </div>

                <div class="scrolly-spacer"></div>

                <!-- STEP 4: Compare two groups -->
                <div class="scrolly-step" data-step="4">
                    <div class="scrolly-step-content">
                        <h2 class="md-typescale-headline-small">Comparison</h2>
                        <p class="md-typescale-body-large">
                            Comparing <strong>developed</strong> vs <strong>developing</strong> nations 
                            reveals an interesting pattern.
                        </p>
                        <p class="md-typescale-body-medium">
                            Wealthier nations consume significantly more coffee per capita, 
                            but producing nations often drink less despite growing the beans.
                        </p>
                    </div>
                </div>

                <div class="scrolly-spacer"></div>

                <!-- STEP 5: Show trend over time -->
                <div class="scrolly-step" data-step="5">
                    <div class="scrolly-step-content">
                        <h2 class="md-typescale-headline-small">Trends Over Time</h2>
                        <p class="md-typescale-body-large">
                            Global coffee consumption has been <strong>steadily increasing</strong> 
                            over the past two decades.
                        </p>
                        <p class="md-typescale-body-medium">
                            The line chart shows year-over-year growth, with special interest 
                            in emerging markets like China and India.
                        </p>
                    </div>
                </div>

                <div class="scrolly-spacer"></div>

                <!-- STEP 6: Conclusion -->
                <div class="scrolly-step" data-step="6">
                    <div class="scrolly-step-content">
                        <h2 class="md-typescale-headline-small">Key Insights</h2>
                        <p class="md-typescale-body-large">
                            Through this scrolling journey, we've discovered that:
                        </p>
                        <ul style="text-align: left; padding-left: 20px;">
                            <li class="md-typescale-body-medium" style="margin: 8px 0;">
                                Nordic countries lead in per-capita consumption
                            </li>
                            <li class="md-typescale-body-medium" style="margin: 8px 0;">
                                Economic development correlates with coffee drinking
                            </li>
                            <li class="md-typescale-body-medium" style="margin: 8px 0;">
                                Global consumption continues to grow
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="scrolly-spacer-large"></div>

            </div>
        </section>

        <!-- ================================================================
             CONCLUSION SECTION
             ================================================================
             Summary after the scrollytelling experience
             ================================================================ -->
        <section class="scrolly-conclusion">
            <h2 class="md-typescale-headline-medium">Recap</h2>
            <ol>
                <li class="md-typescale-body-large">
                    <strong>Scrollytelling</strong> combines narrative text with dynamic visualizations 
                    to create an engaging data story.
                </li>
                <li class="md-typescale-body-large">
                    The <strong>Intersection Observer API</strong> tracks which section is visible 
                    and updates the visualization accordingly.
                </li>
                <li class="md-typescale-body-large">
                    <strong>D3.js transitions</strong> smoothly animate between different states 
                    of the data representation.
                </li>
            </ol>
        </section>

    </main>

    <app-footer></app-footer>
</body>
</html>
